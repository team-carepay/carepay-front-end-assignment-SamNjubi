<div class="container-fluid">
  <div class="mt-3 row">
    <div class="col-sm-12 col-md-7 col-lg-6">
      <form
        [formGroup]="filterForm"
        class="d-flex mt-3"
        style="flex-wrap: wrap">
        <div class="input-group">
          <input
            class="form-control py-2 border-right-0 border"
            type="search"
            formControlName="search"
            id="treatment-search-input"
            placeholder="Search for a treatment by its code" />
          <span class="input-group-text">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-search"
              viewBox="0 0 16 16">
              <path
                d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
            </svg>
          </span>
        </div>
      </form>
    </div>
  </div>
  <div
    *ngIf="
      filterForm.controls['search'].invalid &&
      filterForm.controls['search'].value &&
      (filterForm.controls['search'].dirty ||
        filterForm.controls['search'].touched)
    "
    class="text-danger mt-2 ms-3">
    <small>
      A proper code is required containing atleast 3 similar characters
    </small>
  </div>

  <table class="table table-striped caption-top table-hover mt-3" id="treatments-table">
    <thead class="table-primary treatments-table-header">
      <tr>
        <th scope="col" class="cursor-pointer d-flex">
          <span> Treatment Code </span>
        </th>
        <th scope="col" class="cursor-pointer">
          <span> Patient </span>
        </th>
        <th scope="col" class="cursor-pointer">
          <span> Treatment Date </span>
        </th>
      </tr>
      <tr></tr>
    </thead>
    <tbody *ngIf="loading">
      <tr
        class="table-row mb-0 pt-2"
        aria-labelledby="content"
        *ngFor="let placeholder of placeholders; trackBy: placeholdertrackByFn">
        <td colspan="6" class="placeholder-glow px-0 pb-0">
          <div class="d-flex placeholder treatments-glow-gradient py-2">.</div>
        </td>
      </tr>
    </tbody>
    <tbody>
      <tr
        *ngFor="
          let treatment of treatments$ | async as treatments;
          let l = index;
          trackBy: trackByFn
        "
        class="cursor-pointer">
        <td scope="row">{{ treatment.treatmentCode }}</td>
        <td>{{ treatment.patient }}</td>
        <td>{{ treatment.treatmentDate }}</td>
      </tr>
    </tbody>
  </table>
  <div
    *ngIf="(treatments$ | async)?.length === 0"
    class="d-flex justify-content-center align-items-center"
    style="min-height: 30vh">
    <div class="d-grid text-center">
      <img
        src="assets/no-data.svg"
        class="img-responsive d-flex my-3"
        style="justify-self: center; max-width: 10rem"
        alt="None" />
      <span class="tui-text_h5"> Ooops. No results found </span>
      <p>
        There is no data available for the search code. Please update the search
        value or try again later
      </p>
    </div>
  </div>
</div>
